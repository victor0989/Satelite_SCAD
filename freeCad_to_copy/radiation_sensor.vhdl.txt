-- radiation_sensor.vhdl
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.NUMERIC_STD.ALL;

entity Radiation_Sensor is
    Port (
        clk     : in  STD_LOGIC;
        reset   : in  STD_LOGIC;
        level   : out STD_LOGIC_VECTOR(7 downto 0);
        warning : out STD_LOGIC
    );
end Radiation_Sensor;

architecture Behavioral of Radiation_Sensor is
    signal rad_level : unsigned(7 downto 0) := (others => '0');
begin
    process(clk, reset)
    begin
        if reset = '1' then
            rad_level <= (others => '0');
        elsif rising_edge(clk) then
            -- Simulaci√≥n: incremento progresivo hasta 255 y reinicio
            if rad_level < x"F0" then
                rad_level <= rad_level + 5;
            else
                rad_level <= x"20";
            end if;
        end if;
    end process;

    level   <= std_logic_vector(rad_level);
    warning <= '1' when rad_level > x"C0" else '0';
end Behavioral;
